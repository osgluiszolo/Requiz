<form [formGroup]="requisicionForm" (ngSubmit)="submit()">
  <!-- Campos del Formulario de Requisición -->
  <div>
    <label for="materia">Materia</label>
    <select id="materia" formControlName="materia">
      <option *ngFor="let materia of materias" [value]="materia.id_materia">{{ materia.modulo }}</option>
    </select>
  </div>

  <div>
    <label for="chef">Chef</label>
    <select id="chef" formControlName="chef">
      <option *ngFor="let chef of chefs" [value]="chef.id_chef">{{ chef.nombre }}</option>
    </select>
  </div>

  <div>
    <label for="fecha">Fecha</label>
    <input id="fecha" type="date" formControlName="fecha">
  </div>

  <div>
    <label for="semana">Semana</label>
    <input id="semana" type="text" formControlName="semana">
  </div>

  <div>
    <label for="categoria">Categoría</label>
    <select id="categoria" formControlName="categoria" (change)="onCategoriaChange($event)">
      <option *ngFor="let categoria of categorias" [value]="categoria.id_categoria">{{ categoria.nombre }}</option>
    </select>
  </div>

  <!-- Productos -->
  <div formArrayName="productos">
    <div *ngFor="let producto of productos.controls; let i = index" [formGroupName]="i">
      <div>
        <label for="nombreProducto">Producto</label>
        <input id="nombreProducto" formControlName="nombre" placeholder="Nombre del Producto">
      </div>
      <div>
        <label for="cantidadProducto">Cantidad</label>
        <input id="cantidadProducto" formControlName="cantidad" placeholder="Cantidad">
      </div>
      <div>
        <label for="unidadProducto">Unidad</label>
        <input id="unidadProducto" formControlName="unidad" placeholder="Unidad">
      </div>
      <p>Categoría: {{ getCategoriaNombre() }}</p>
    </div>
    <button type="button" (click)="addProducto()">Agregar Producto</button>
  </div>

  <!-- Mensajes de Éxito/Error -->
  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="success">{{ successMessage }}</div>

  <!-- Botón para Enviar Formulario -->
  <button type="submit">Enviar Requisición</button>
</form>